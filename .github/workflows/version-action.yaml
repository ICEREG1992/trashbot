---
name: update version
run-name: ${{ github.actor }} is changing last update date
on:
  - push
jobs:
  update-version:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
      - name: Update Version
        run: |
          sed -i "s/Â§DATE/$(date +\%Y-\%m-\%d)/g" main.py
      - name: Commit and Push
        run: |
          git config --global user.email "actions@github.com"
          git config --global user.name "GitHub Actions"
          git add main.py
          git commit -m "github actions $(date +\%Y-\%m-\%d)"
          git push
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          commit-message: "[GitHub Actions] replace string with date"
          title: "[GitHub Actions] Replace String with date"
      - name: Approve Pull Request
        uses: juliangruber/approve-pull-request-action@v2.0.0
        with:
          number: $(echo "${{ steps.cpr.outputs.pull-request }}" | awk -F/ '{print $NF}')